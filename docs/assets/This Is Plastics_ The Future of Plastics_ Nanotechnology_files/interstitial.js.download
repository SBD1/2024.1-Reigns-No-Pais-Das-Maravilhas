    
 function pageVisitation(){
	 
	 //If Page visited does not exist, set to 1. First visit 
	 if(!Cookies.get('pages_visited')){
		 Cookies.set('pages_visited', 1);
	 }else{
		 //else set the value to plus 1 of the existing value
		 Cookies.set('pages_visited', parseInt(Cookies.get('pages_visited')) + 1);
	 }
 }

 function pageVisits(){
	 //Set pages
	 var currentUrl = window.location.href;
		 //if current_page cookie exists and does not match current url
		 if( Cookies.get('current_page')){
			 if(Cookies.get('current_page') != currentUrl){
				//set the current page cookie
				Cookies.set('current_page', currentUrl);
				// Call the page visitation method
				pageVisitation();	 
			 }
		 }else{
			 Cookies.set('current_page', currentUrl);
			// Call the page visitation method
			pageVisitation();	 
		 }
 }

// JavaScript Document
$(document).ready(function () {

	//Call Page Visit
	pageVisits();
 
    var closeINT = $("#closeINT");
    var noThanks = $("#noThanks");
    var INToverlay = $("#INToverlay");
    var interstitialCallout = $(".interstitialCallout");
	
    // add removal css 
    function CloseInterstitial(){
		//Interstitial expiry
		Cookies.set('Interstitial', 'expiry', { expires: 2 });//Expires in 2 days
        interstitialCallout.addClass("exit");
		setTimeout(function(){
			INToverlay.css("visibility", "hidden");
			INToverlay.addClass("none");
			INToverlay.remove();
		}, 900);
    }

    var cook = getCookie('INTCookie');

///////////////////// IF USER VISITS MORE THAN 2 PAGES /////////////////////////
///AND THE INTERSTITIAL DOES NOT COOKIE EXIST
	 
	
 	if(parseInt(Cookies.get('pages_visited')) == 3 && !Cookies.get('Interstitial')){
       
		 setTimeout(function() {

			 INToverlay.addClass('show');
			interstitialCallout.removeClass("exit");

		}, 3000);
        
    
		//no thanks text removal
		noThanks.on("click", function(){
			CloseInterstitial();
		});

		// close icon removal
		closeINT.on("click", function(){
		   CloseInterstitial();
		}); 
    
    	//if background of the interstitial is clicked remove
		INToverlay.on("click", function (e) {
        var ev = e || window.event;
            if(ev.target == this){
                CloseInterstitial(); 
            }
        });
  
        
	}else{
		INToverlay.css("visibility", "hidden");
        INToverlay.addClass("none");
        INToverlay.remove();
	}
    
    

        

        
        

       
    
    
    

//Interstitial subscribe
$('#INTheader1 #newsletterSignup').validate({
	rules: {
		email: {
			required: true,
			email: true
		},
		zip: {
			minlength: 5
		},
	},
	showErrors: function (  element) {
		
		if(element.email){
			$("#INTheader1 input#email").addClass("invalid-field");	
		}
		$( "#INTheader1 #newsletterSignup input#email" ).blur(function() {
		 $("#INTheader1 #newsletterSignup input#email").removeClass("invalid-field");
		});
		  
	},
	submitHandler: function (form) {
		//set cookies
		Cookies.set('inters_email', $("#INTheader1 input#email").val());
		Cookies.set('inters_zip', $("#INTheader1 input#zip").val());
		
		$.ajax({
			url: '/acton/subscribe.php',
			type:'POST',
			data: {
				emailaddress: $( "#INTheader1 input#email" ).val(),
				Zipcode: $( "#INTheader1 input#zip" ).val()
			},
			success:function(data) { // AJAX REQUEST RESULTS
				console.log("We will get back to you soon...");
			},
			error: function(errorThrown){
				//console.log(errorThrown);
			}
		});
		InterSuccessUI();
	}
});	
function InterSuccessUI(){ 
	window.location.replace('/submit-question/')
	 //Clear form input
//	$("#INTheader1 #newsletterSignup input#email").removeClass("invalid-field");	
//	$("#INTheader1 #newsletterSignup input").val("");
//	
//	//Display message
//	$(".interstitialCallout .message").html("<p>Thanks! We will get back to you soon.</p>");
//	$(".interstitialCallout .message").addClass("success");
//	$(".interstitialCallout .message").removeClass("hidden");
    
     
}
    
function close(){
    CloseInterstitial();
    //set interstital cookie    
    if(!cook){
       //setCookie('INTCookie','interstitialCookie',7); 
    }
}
	
});
